webpackJsonp([2,7],{1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(27),r=n(255),o=n(1272),c=n(1258);n.d(t,"TeamSpeakModule",function(){return f});var l=this&&this.__decorate||function(e,t,n,a){var i,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(){}return e=l([n.i(a.NgModule)({imports:[i.a,r.a,o.a],declarations:[c.a]}),s("design:paramtypes",[])],e)}()},1258:function(e,t,n){"use strict";var a=n(0),i=n(115),r=n(68);n.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,n,a){var i,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t){this.sanitizer=e,this.http=t,this.channels=[],this.URI="ts3server://ts.adam-keenan.com",this.refresh()}return e.prototype.ngOnInit=function(){},e.prototype.refresh=function(){var e=this;this.http.get("/api/services/teamspeak").subscribe(function(t){var n=t.json().data;e.channels=e.buildData([],n.channels,n.online)})},e.prototype.getURI=function(e){var t=this.URI;return e&&(t+="?cid="+e),this.sanitizer.bypassSecurityTrustUrl(t)},e.prototype.buildData=function(e,t,n){var a=n.map(function(e){return{name:e.client_nickname,realname:e.client_nickname,away:e.client_away,cid:e.cid}});this.sortClients(a);for(var i=0,r=t;i<r.length;i++){var o=r[i];o.clients=[];for(var c=0,l=a;c<l.length;c++){var s=l[c];if(s.cid===o.cid){for(var f=0,d=e;f<d.length;f++){var p=d[f],u=p.usernames.teamspeak.indexOf(s.name);if(u>=0){s.realname=p.name;break}}o.clients.push(s)}}}return t},e.prototype.sortClients=function(e){e.sort(function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n>a?1:0}),e.sort(function(e,t){return e.online&&t.away||e.online&&!t.online||e.away&&!t.online?-1:t.online&&e.away||t.online&&!e.online||t.away&&!e.online?1:0})},e=o([n.i(a.Component)({selector:"app-teamspeak",template:n(1284),styles:[n(1279)]}),c("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.d&&r.d)&&t||Object,"function"==typeof(l="undefined"!=typeof i.Http&&i.Http)&&l||Object])],e);var t,l}()},1272:function(e,t,n){"use strict";var a=n(0),i=n(402),r=n(1258);n.d(t,"a",function(){return s});var o=this&&this.__decorate||function(e,t,n,a){var i,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=[{path:"",component:r.a}],s=function(){function e(){}return e=o([n.i(a.NgModule)({imports:[i.a.forChild(l)],exports:[i.a]}),c("design:paramtypes",[])],e)}()},1279:function(e,t){e.exports="md-card-title{display:-webkit-box;display:-ms-flexbox;display:flex}md-card-title span:nth-child(2){-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}\n"},1284:function(e,t){e.exports="<md-card>\n    <md-card-title>\n        TeamSpeak\n        <span class='flex-filler'></span>\n        <button md-raised-button color='accent' (click)='refresh()'>\n            Refresh <md-icon>refresh</md-icon>\n        </button>\n    </md-card-title>\n</md-card>\n<md-card *ngFor='let channel of channels'>\n    <md-card-title>\n        <span>{{ channel.channel_name }}</span>\n        <span></span>\n        <a md-raised-button color='accent' [href]='getURI(channel.cid)'>Connect</a>\n    </md-card-title>\n    <md-card-content>\n        <md-list>\n            <md-list-item *ngFor='let client of channel.clients'>\n                <md-icon md-list-avatar [color]='client.away ? \"warn\" : \"primary\"'>person</md-icon>\n                <h4 md-line>{{ client.name }}</h4>\n                <p md-line>{{ client.nickname }}&nbsp;</p>\n            </md-list-item>\n            <md-list-item *ngIf='channel.clients.length === 0'>\n                No clients connected\n            </md-list-item>\n        </md-list>\n    </md-card-content>\n</md-card>\n"}});
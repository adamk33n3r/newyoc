webpackJsonp([0,7],{1248:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(52),i=n(27),a=n(255),s=n(1261),c=n(1268),l=n(1255),u=n(1256);n.d(e,"StardewModule",function(){return d});var p=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(){}return t=p([n.i(r.NgModule)({imports:[o.a,i.a,a.a,s.a,c.a],declarations:[l.a,u.a],entryComponents:[u.a]}),f("design:paramtypes",[])],t)}()},1251:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.toString=function(){return"x: "+this.x+", y: "+this.y},t}()},1253:function(t,e,n){"use strict";var r=n(1259),o=n(1254),i=n(1251);n.d(e,"a",function(){return s});var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=function(t){function e(e){t.call(this,e)}return a(e,t),Object.defineProperty(e,"MapWidth",{get:function(){return e.mapWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MapHeight",{get:function(){return e.mapHeight},enumerable:!0,configurable:!0}),e.prototype.getPlayer=function(){if(!this.player){var t=this.getNode("/player");this.player=new o.a;for(var e in this.player)this.player[e]=this.getText("./"+e,t);var n=this.getNodes("./questLog/Quest",t);this.player.questLog=[];for(var r=0,i=n;r<i.length;r++){var a=i[r];this.player.questLog.push({type:this.getAttribute("type",a),description:this.getText("./questDescription",a),title:this.getText("./questTitle",a)})}}return this.player},e.prototype.getFarm=function(){var t=this.getNode('/locations/GameLocation[@xsi:type="Farm"]');return console.log(t),{buildings:[],objects:this.getFarmObjects(t),terrainFeatures:this.getFarmTerrainFeatures(t)}},e.prototype.getAttribute=function(e,n){return t.prototype.getAttribute.call(this,"xsi:"+e,n)},e.prototype.evaluate=function(e,n,r){return void 0===r&&(r=XPathResult.ANY_TYPE),n||(e="/SaveGame"+e),t.prototype.evaluate.call(this,e,n,r)},e.prototype.getFarmObjects=function(t){for(var n=this.getNodes("./objects/item",t),r=new Array(e.mapWidth*e.mapHeight).fill(null),o=0,a=n;o<a.length;o++){var s=a[o],c=this.getNode("./value/Object",s),l={location:new i.a(this.getNumber("./tileLocation/X",c),this.getNumber("./tileLocation/Y",c)),name:this.getText("./name",c),type:this.getText("./type",c),canBeSetDown:this.getBoolean("./canBeSetDown",c),canBeGrabbed:this.getBoolean("./canBeGrabbed",c),questItem:this.getBoolean("./questItem",c),price:this.getNumber("./price",c),stack:this.getNumber("./stack",c),quality:this.getNumber("./quality",c),health:this.getNumber("./health",c),maxHealth:this.getNumber("./maxHealth",c),node:c};r[(l.location.y-1)*e.mapWidth+l.location.x]=l}return this.sortTiles(r)},e.prototype.getFarmTerrainFeatures=function(t){for(var n=this.getNodes("./terrainFeatures/item",t),r=new Array(e.mapWidth*e.mapHeight).fill(null),o=0,a=n;o<a.length;o++){var s=a[o],c=this.getNode("./value/TerrainFeature",s),l={location:new i.a(this.getNumber("./key/Vector2/X",s),this.getNumber("./key/Vector2/Y",s)),type:this.getAttribute("type",c),treeType:this.getNumber("./treeType",c),fruitsOnTree:this.getNumber("./fruitsOnTree",c),growthStage:this.getNumber("./growthStage",c),node:c};r[(l.location.y-1)*e.mapWidth+l.location.x]=l}return this.sortTiles(r)},e.prototype.sortTiles=function(t){return t},e.mapWidth=77,e.mapHeight=64,e}(r.a)},1254:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){this.name=void 0,this.farmName=void 0,this.favoriteThing=void 0,this.shirt=void 0,this.hair=void 0,this.skin=void 0,this.accessory=void 0,this.facialHair=void 0}return t}()},1255:function(t,e,n){"use strict";var r=n(0),o=n(255),i=n(1267),a=n(1266),s=n(1256);n.d(e,"a",function(){return u});var c=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t){this.modal=t,this.fileParsed=!1}return t.prototype.ngOnInit=function(){},t.prototype.processFile=function(t){var e=this;if(t){this.fileName=t.name;var n=new FileReader;n.onload=function(t){var r=new DOMParser,o=r.parseFromString(n.result,"application/xml");e.doc=o,window.doc=o,e.parseSaveGame(o)},n.readAsText(t)}},t.prototype.saveFile=function(){var t=(new XMLSerializer).serializeToString(this.doc),e=new Blob([t],{type:"text/xml"}),n=window.document.createElement("a");n.href=window.URL.createObjectURL(e),n.download="savegame.xml",document.body.appendChild(n),n.click(),document.body.removeChild(n)},t.prototype.parseSaveGame=function(t){var e=this,n=new i.a(t);this.player=n.getPlayer(),console.log(this.player),this.farm=n.getFarm(),this.fileParsed=!0,this.renderer=new a.a(this.baseCanvasRef.nativeElement,this.overlayCanvasRef.nativeElement,this.farm,{Grass:"green",Tree:"darkgreen",FruitTree:"pink",Flooring:"grey",HoeDirt:"sandybrown",Stone:"darkgrey","Stone Fence":"slategrey",Weeds:"forestgreen",Twig:"sienna","Lightning Rod":"dimgrey",Chest:"saddlebrown","Worm Bin":"lightgreen"},function(t){var n=e.modal.open(s.a);n.componentInstance.tile=t,n.afterClosed().subscribe(function(t){console.log(t)})}),this.renderer.drawFarm()},c([n.i(r.ViewChild)("baseCanvas"),l("design:type","function"==typeof(e="undefined"!=typeof r.ElementRef&&r.ElementRef)&&e||Object)],t.prototype,"baseCanvasRef",void 0),c([n.i(r.ViewChild)("overlayCanvas"),l("design:type","function"==typeof(u="undefined"!=typeof r.ElementRef&&r.ElementRef)&&u||Object)],t.prototype,"overlayCanvasRef",void 0),t=c([n.i(r.Component)({selector:"app-stardew",template:n(1281),styles:[n(1277)]}),l("design:paramtypes",["function"==typeof(p="undefined"!=typeof o.c&&o.c)&&p||Object])],t);var e,u,p}()},1256:function(t,e,n){"use strict";var r=n(0),o=n(255),i=n(1251);n.d(e,"a",function(){return c});var a=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.dialogRef=t,this.tileInfo=[]}return Object.defineProperty(t.prototype,"tile",{set:function(t){this._tile=t;for(var e in t){var n=t[e];"number"==typeof n&&isNaN(n)||void 0===n||this.tileInfo.push({key:e,value:t[e]})}},enumerable:!0,configurable:!0}),t.prototype.isVector=function(t){return t.value.constructor===i.a},t.prototype.close=function(){for(var t=0,e=this.tileInfo;t<e.length;t++){var n=e[t];this._tile[n.key]=n.value}this.dialogRef.close(this._tile)},t=a([n.i(r.Component)({template:n(1282)}),s("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.b&&o.b)&&e||Object])],t);var e}()},1259:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t){this.xml=t,this.nsResolver=document.createNSResolver(t)}return t.prototype.getNode=function(t,e){return this.evaluate(t,e,XPathResult.FIRST_ORDERED_NODE_TYPE).singleNodeValue},t.prototype.getNodes=function(t,e){for(var n=this.evaluate(t,e,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),r=[],o=0;o<n.snapshotLength;o++)r.push(n.snapshotItem(o));return r},t.prototype.getText=function(t,e){return this.evaluate(t,e,XPathResult.STRING_TYPE).stringValue},t.prototype.getNumber=function(t,e){return this.evaluate(t,e,XPathResult.NUMBER_TYPE).numberValue},t.prototype.getBoolean=function(t,e){return t+='[text() = "true"]',this.evaluate(t,e,XPathResult.BOOLEAN_TYPE).booleanValue},t.prototype.getAttribute=function(t,e){return e.attributes.getNamedItem(t).value},t.prototype.evaluate=function(t,e,n){return void 0===e&&(e=this.xml),void 0===n&&(n=XPathResult.ANY_TYPE),this.xml.evaluate(t,e,this.nsResolver,n,null)},t}()},1261:function(t,e,n){"use strict";var r=n(0),o=n(1263),i=n(1262);n.d(e,"a",function(){return c});var a=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(){}return t=a([n.i(r.NgModule)({declarations:[o.a,i.a],exports:[o.a,i.a]}),s("design:paramtypes",[])],t)}()},1262:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return a});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(){}return t.prototype.transform=function(t){return t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(t){return t.toUpperCase()})},t=o([n.i(r.Pipe)({name:"titleize"}),i("design:paramtypes",[])],t)}()},1263:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return a});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(){}return t.prototype.transform=function(t,e){return typeof t===e},t=o([n.i(r.Pipe)({name:"typeof"}),i("design:paramtypes",[])],t)}()},1265:function(t,e,n){"use strict";var r=n(1251);n.d(e,"a",function(){return o});var o=function(){function t(t,e,n,r){var o=this;void 0===r&&(r=1),this.canvas=t,this.width=e,this.height=n,this.scale=r,this.canvas.width=this.width*this.scale,this.canvas.height=this.height*this.scale,this.context=t.getContext("2d"),this.context.textBaseline="hanging",this.canvas.addEventListener("mousemove",function(t){if("function"==typeof o.onMouseOverFn){var e=o.getMousePosition(t),n=o.getTilePos(e);o.mouseMovePosCache&&o.mouseMovePosCache.equals(n)||(o.mouseMovePosCache=n,o.onMouseOverFn(n))}}),this.canvas.addEventListener("mousedown",function(t){if("function"==typeof o.onMouseClickFn){var e=o.getMousePosition(t),n=o.getTilePos(e);o.onMouseClickFn(n)}})}return Object.defineProperty(t.prototype,"Width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),t.prototype.drawPixel=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n="black"),this.drawRect(t.x,t.y,e,e,n)},t.prototype.drawRect=function(t,e,n,r,o){void 0===o&&(o="black"),this.context.fillStyle=o,this.context.fillRect(t*this.scale,e*this.scale,n*this.scale,r*this.scale)},t.prototype.drawText=function(t,e,n,r){void 0===n&&(n="black"),void 0===r&&(r="20px Calibri"),this.context.font=r,this.context.fillStyle=n,this.context.fillText(e,t.x*this.scale,t.y*this.scale)},t.prototype.clear=function(){this.context.clearRect(0,0,this.Width,this.Height)},t.prototype.onMouseOver=function(t){this.onMouseOverFn=t},t.prototype.onMouseClick=function(t){this.onMouseClickFn=t},t.prototype.getTilePos=function(t){return new r.a(Math.floor(t.x/this.scale),Math.floor(t.y/this.scale))},t.prototype.getMousePosition=function(t){var e=this.canvas.getBoundingClientRect();return new r.a(Math.floor(t.clientX-e.left),Math.floor(t.clientY-e.top))},t}()},1266:function(t,e,n){"use strict";var r=n(1251),o=n(1269),i=n(1265),a=n(1253);n.d(e,"a",function(){return c});var s=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=function(t){function e(e,n,o,s,c){var l=this;t.call(this,e,a.a.MapWidth,a.a.MapHeight,10),this.farm=o,this.colorMap=s,console.log(r.a,new r.a(1,2)),this.drawRect(0,0,this.Width,this.Height,"burlywood"),this.overlayRenderer=new i.a(n,a.a.MapWidth,a.a.MapHeight,10),this.overlayRenderer.onMouseOver(function(t){l.overlayRenderer.clear(),l.overlayRenderer.drawPixel(t,1,"red"),l.overlayRenderer.drawText(new r.a(0,0),"Pos: "+t)}),this.overlayRenderer.onMouseClick(function(t){console.log("clicked at "+t);var e=l.getTileAt(t);console.log("clicked on tile",e),l.overlayRenderer.drawPixel(t,1,"blue"),c(e)})}return s(e,t),e.prototype.drawFarm=function(){for(var t=0,e=this.farm.terrainFeatures;t<e.length;t++){var n=e[t];if(null!==n){var o=this.colorMap[n.type]||"deeppink";this.drawPixel(n.location,1,o)}}for(var i=0,a=this.farm.objects;i<a.length;i++){var s=a[i];if(null!==s){var o=this.colorMap[s.name]||"yellow";this.drawPixel(new r.a(s.location.x+.25,s.location.y+.25),.5,o)}}},e.prototype.getTileAt=function(t){var e=o.a.ArrayGet2D(this.farm.objects,t.x,t.y,a.a.MapWidth);if(e)return console.log("was object"),e;console.log("was feature");var n=o.a.ArrayGet2D(this.farm.terrainFeatures,t.x,t.y,a.a.MapWidth);return n},e}(i.a)},1267:function(t,e,n){"use strict";var r=n(1253);n.d(e,"a",function(){return r.a});n(1254)},1268:function(t,e,n){"use strict";var r=n(0),o=n(402),i=n(1255);n.d(e,"a",function(){return l});var a=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=[{path:"",component:i.a}],l=function(){function t(){}return t=a([n.i(r.NgModule)({imports:[o.a.forChild(c)],exports:[o.a],providers:[]}),s("design:paramtypes",[])],t)}()},1269:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){}return t.ArrayGet2D=function(t,e,n,r){return t[(n-1)*r+e]},t}()},1277:function(t,e){t.exports=".file-upload-button{position:absolute;top:0;right:0;width:calc(100% + 238px);height:100%;z-index:1;cursor:pointer;opacity:0}.file-info{margin-left:15px}.canvas-wrapper{position:relative;margin:24px 0;cursor:pointer}.canvas-wrapper canvas{position:relative;display:block;margin:0 auto;top:0;left:0;right:0}.canvas-wrapper canvas:nth-child(2){position:absolute}\n"},1281:function(t,e){t.exports="<md-card>\n    <md-card-content>\n        <!--<input id='file' type='file' (change)='processFile($event.target.files[0])' />-->\n        <!--<label md-raised-button for='file'>Upload File</label>-->\n        <button md-raised-button class='w100p'>\n            <span *ngIf='!fileParsed'>Select Save File</span>\n            <span *ngIf='fileParsed'>{{ player.name }} - {{ player.farmName }} Farm</span>\n            <input class='file-upload-button' type='file' (change)='processFile($event.target.files[0])' />\n        </button>\n        <div class='canvas-wrapper' [hidden]='!fileParsed'>\n            <canvas #baseCanvas></canvas>\n            <canvas #overlayCanvas></canvas>\n        </div>\n        <button *ngIf='fileParsed' md-raised-button class='w100p' (click)='saveFile()'>Export Save</button>\n    </md-card-content>\n</md-card>\n"},1282:function(t,e){t.exports="<h1 md-dialog-title>Tile Edit</h1>\r\n<md-dialog-content>\r\n    <md-list>\r\n        <md-list-item *ngFor='let prop of tileInfo'>\r\n            <md-input-container *ngIf='prop.value | typeof: \"number\"'>\r\n                <input mdInput type='number' step='1' [placeholder]='prop.key | titleize' [(ngModel)]='prop.value' />\r\n            </md-input-container>\r\n            <md-input-container *ngIf='prop.value | typeof: \"string\"'>\r\n                <input mdInput type='text' [placeholder]='prop.key | titleize' [(ngModel)]='prop.value' />\r\n            </md-input-container>\r\n            <md-slide-toggle *ngIf='prop.value | typeof: \"boolean\"'\r\n                color='primary'\r\n                [(ngModel)]='prop.value'\r\n            >\r\n                {{ prop.key | titleize }}\r\n            </md-slide-toggle>\r\n            <div *ngIf='isVector(prop)'>\r\n                <div>{{ prop.key | titleize }}</div>\r\n                <md-input-container>\r\n                    <input mdInput type='number' step='1' placeholder='X' [(ngModel)]='prop.value.x' />\r\n                </md-input-container>\r\n                <md-input-container>\r\n                    <input mdInput type='number' step='1' placeholder='Y' [(ngModel)]='prop.value.y' />\r\n                </md-input-container>\r\n            </div>\r\n        </md-list-item>\r\n    </md-list>\r\n</md-dialog-content>\r\n<md-dialog-actions>\r\n    <button md-raised-button (click)='close()'>Save</button>\r\n</md-dialog-actions>\r\n"}});